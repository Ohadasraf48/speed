
<!doctype html><html lang="he"><head>  <meta charset="utf-8" />  <title>מד מהירות עם נקודות</title>  <meta name="viewport" content="width=device-width, initial-scale=1" />  <style>    body { font-family: system-ui, sans-serif; margin: 0; padding: 24px; background:#0f172a; color:#f8fafc; text-align:center; }    .card { background:#1e293b; border-radius:16px; padding:24px; max-width:420px; margin:0 auto; }    h1 { margin-bottom:8px; font-size:1.8rem; }    .speed { font-size:3.5rem; margin:16px 0; }    .points { font-size:2rem; color:#34d399; }    button { margin-top:20px; padding:12px 16px; font-size:1rem; border:none; border-radius:999px; background:#38bdf8; color:#0f172a; font-weight:600; }    .status { margin-top:12px; font-size:0.95rem; color:#cbd5f5; min-height:1.4em; }  </style></head><body dir="rtl">  <div class="card">    <h1>נקודות על נהיגה נכונה</h1>    <p>רוץ את הדמו, תן הרשאת מיקום וסע במהירות המותרת.</p>    <div class="speed" id="speed">0 קמ״ש</div>    <div>מהירות מותרת: <span id="limit">80</span> קמ״ש</div>    <div class="points">נקודות: <span id="points">0</span></div>    <button id="toggle">התחל מעקב</button>    <div class="status" id="status"></div>  </div>  <script>    const limit = 80;    const pointsPerTick = 5;    const intervalMs = 5000;    let watchId = null;    let points = 0;    let rewardTimer = null;    const speedEl = document.getElementById('speed');    const pointsEl = document.getElementById('points');    const statusEl = document.getElementById('status');    const toggleBtn = document.getElementById('toggle');    function formatSpeed(mps) {      if (mps == null) return 'לא זמין';      const kph = Math.max(0, mps * 3.6);      return `${kph.toFixed(1)} קמ״ש`;    }    function handleReward(currentSpeedMps) {      clearInterval(rewardTimer);      const kph = currentSpeedMps * 3.6;      if (kph <= limit) {        rewardTimer = setInterval(() => {          points += pointsPerTick;          pointsEl.textContent = points;        }, intervalMs);      }    }    function startTracking() {      if (!('geolocation' in navigator)) {        statusEl.textContent = 'הדפדפן לא תומך ב-Geolocation.';        return;      }      toggleBtn.textContent = 'עצור מעקב';      statusEl.textContent = 'מבקש הרשאת מיקום...';      watchId = navigator.geolocation.watchPosition(        pos => {          statusEl.textContent = 'מעקב פעיל.';          const speed = pos.coords.speed;          speedEl.textContent = formatSpeed(speed);          if (speed != null) handleReward(speed);        },        err => {          statusEl.textContent = 'שגיאה: ' + err.message;          stopTracking();        },        { enableHighAccuracy: true, maximumAge: 1000, timeout: 10000 }      );    }    function stopTracking() {      if (watchId != null) navigator.geolocation.clearWatch(watchId);      clearInterval(rewardTimer);      watchId = null;      rewardTimer = null;      toggleBtn.textContent = 'התחל מעקב';      statusEl.textContent = 'המעקב נעצר.';    }    toggleBtn.addEventListener('click', () => {      if (watchId == null) startTracking();      else stopTracking();    });  </script></body></html>